import{d as A,r as l,l as $,h as k,f as o,F as U,i as B,e as u,o as v,c as N,b as y,w as g,m as V,k as W,v as j,p as q,q as z}from"./index-Bm70YWUx.js";import{g as L,a as S}from"./product-Dqc66JWm.js";import{P as T}from"./product_card-7y9eDpR-.js";const G={class:"sm-pl-4 border-l-solid border-l-2px border-[#EDC17B] sm-text-[16px] text-[10px]"},M=A({__name:"product_filter",emits:["update-filters"],setup(D,{emit:b}){const w=b,i=l([]),n=l([]),s=l([]),p=[{label:"木質調",value:"木質"},{label:"花香調",value:"花香"},{label:"麝香調",value:"麝香"},{label:"柑橘調",value:"柑橘"},{label:"皮革調",value:"皮革"},{label:"清新調",value:"清新"},{label:"東方調",value:"東方"}],_=async()=>{try{const d=await L();d.status==200&&(i.value=d.data)}catch(d){console.log(d)}},c=l(0);return $([n,s],()=>{n.value.length!==0&&s.value.length==0?c.value=1:n.value.length==0&&s.value.length!==0?c.value=2:n.value.length!==0&&s.value.length!==0?c.value=3:c.value=0,w("update-filters",{names:n.value,notes:s.value,selected:c.value})}),_(),(d,h)=>{const C=u("v-autocomplete"),e=u("v-checkbox");return v(),k("div",G,[o(C,{variant:"underlined",class:"ml-2 sm-ml-0 sm-w-[15vw] sm-max-w-[200px] text-[8px]",clearable:"",chips:"",label:"商品名稱搜尋",modelValue:n.value,"onUpdate:modelValue":h[0]||(h[0]=t=>n.value=t),items:i.value,multiple:""},null,8,["modelValue","items"]),(v(),k(U,null,B(p,t=>o(e,{color:"#EDC17B",class:"-py-2 sm-text-[16px] text-[10px] h-[50px]",modelValue:s.value,"onUpdate:modelValue":h[1]||(h[1]=a=>s.value=a),label:t.label,value:t.value},null,8,["modelValue","label","value"])),64))])}}}),H={key:2,class:"bg-w border-1px border-solid bg-[#FFE38D] border-[#F3C251] w-[40px] h-[40px] fixed bottom-[45px] right-[3%] rounded-full"},O=A({__name:"index",setup(D){const b=l(window.innerWidth),w=l(!1),i=l([]),n=l([]),s=async()=>{const e=await S();e.status==200&&(i.value=e.data,n.value=e.data)},p=l([]),_=l([]),c=l(0),d=e=>{p.value=e.names,_.value=e.notes,c.value=e.selected},h=N(()=>{switch(c.value){case 0:return i.value;case 1:return i.value.filter(e=>p.value.length!==0?p.value.some(a=>{var r;return(r=e.product_name)==null?void 0:r.includes(a)}):!0);case 2:return i.value.filter(e=>{var a;return _.value.length!==0?Array.isArray((a=e.ingredients)==null?void 0:a.香調)&&_.value.some(r=>e.ingredients.香調.some(f=>f.includes(r))):!0});case 3:return i.value.filter(e=>{var r;const t=p.value.length!==0?p.value.some(f=>{var x;return(x=e.product_name)==null?void 0:x.includes(f)}):!0,a=_.value.length!==0?Array.isArray((r=e.ingredients)==null?void 0:r.香調)&&_.value.some(f=>e.ingredients.香調.some(x=>x.includes(f))):!0;return t||a})}}),C=()=>{window.scrollTo({top:0,behavior:"smooth"})};return s(),(e,t)=>{const a=u("v-navigation-drawer"),r=u("v-col"),f=u("v-row"),x=u("v-fab"),F=u("v-btn"),E=u("v-speed-dial"),P=u("v-container");return v(),y(P,{class:"w-full sm-w-[85%] flex items-start"},{default:g(()=>[b.value>425?(v(),y(M,{key:0,onUpdateFilters:d,class:"sm-w-20% w-[30%] sm-px-4"})):V("",!0),b.value<=425?(v(),y(a,{key:1,modelValue:w.value,"onUpdate:modelValue":t[0]||(t[0]=m=>w.value=m),"mobile-breakpoint":"sm",location:e.$vuetify.display.sm?"bottom":"left",temporary:""},{default:g(()=>[o(M,{onUpdateFilters:d,class:"w-[100%] sm-px-4"})]),_:1},8,["modelValue","location"])):V("",!0),o(f,{class:"sm-w-80% w-[70%] mr-a","align-item":"left","align-content":"center",justify:"space-evenly"},{default:g(()=>[(v(!0),k(U,null,B(h.value,m=>(v(),y(r,{cols:"6",sm:"",key:m.id},{default:g(()=>[o(T,{prop_data:m},null,8,["prop_data"])]),_:2},1024))),128))]),_:1}),b.value<=425?(v(),k("div",H,[W(o(E,{location:"top left",transition:"slide-y-reverse-transition","close-on-content-click":""},{activator:g(({props:m})=>[o(x,z({class:"fixed bottom-[55px] right-[8%] text-[#F3C251]",color:"#FFE38D"},m,{size:"4",icon:"mdi-format-list-bulleted"}),null,16)]),default:g(()=>[o(F,{key:"1",icon:"mdi-filter-outline",onClick:t[1]||(t[1]=q(m=>w.value=!w.value,["stop"]))}),o(F,{key:"2",icon:"mdi-cart-outline",to:"/user/user_order"}),o(F,{key:"3",icon:"mdi-chevron-up",onClick:t[2]||(t[2]=m=>C())})]),_:1},512),[[j,b.value<=425]])])):V("",!0)]),_:1})}}});export{O as default};
